
@import "fonts.less";

// font awesome
@fa-font-path: "fonts/fontawesome/fonts/";
//@import "fonts/fontawesome/less/font-awesome-sprockets.less";
@import "fonts/fontawesome/less/font-awesome.less";




// Color: white
@main_text_color: lighten(black, 10%);
@main_background_color: darken(white, 1%);
@secondary_color: DarkOliveGreen;
@grayed_color: fadeout(@main_text_color, 30%);
@link_color: navy;
@author1_color: #804040; //#805A5A; //maroon;
@author2_color: #466446; //darkgreen;
@author3_color: #294E66; //#294E66; //#5C7483;
// reading point
@audio_highlight: rgba(255,230,0, .5);

// higlighter pens
@highlighter_red: red;
@highlighter_green: green;
@highlighter_blue: blue;
@highlighter_purple: purple;

// Color: sepia
@sepia_text_color: black;
@sepia_background_color: #F6EEE5;


// Color: night
@night_text_color: darken(white, 10%);
@night_background_color: black;
@night_secondary_color: lighten(desaturate(DarkOliveGreen, 20%), 20%);
@night_grayed_color: fadeout(@night_text_color, 30%);
@night_link_color: lighten(desaturate(blue, 70%), 20%);
@night_author1_color: lighten(red, 25%);
@night_author2_color: lighten(desaturate(darkgreen, 80%), 40%);
@night_author3_color: lighten(#306383, 30%);
// reading point
@night_audio_highlight: rgba(255,230,0, 1);



/* global for all Ocean content */
body.ocean {
  font-size: @main_font_size;
  //background-color: @main_background_color;
  //color: @main_text_color;
  padding-right: 1em;
  div {margin:0; padding:0;}
  a { // default link style
    text-decoration: none; color: @link_color;
    &:visited {text-decoration: none; color: @link_color;}
    &:hover {text-decoration: underline;}
  }
  .fullwidth img, img.fullwidth {
    width:90%; margin-left: 5%; margin-right:5%
  }
  hr { // Section divider - TODO: add some more subclass styles
    display: block; border: 0; margin: 3em 0;   height: 35px;
    text-align:center;
    background: url(hr.svg) 50% 0 no-repeat;
    opacity: .5;
    &.small {background: url(hr2.png) 50% 0 no-repeat; background-size: 54px 8px;}
    &.compact {margin: 1em;}
  }
  pre {
    font-size: @main_font_size * .65;
  }
  h1,h2,h3,h4 {margin-left: 60px; margin-right: 60px;}
  h1 {font-size: @main_font_size * 2.5 !important;}
  h2 {font-size: @main_font_size * 2 !important;}
  h3 {font-size: @main_font_size * 1.5;}
  h4 {font-size: @main_font_size * 1.25;}
  .allcaps {text-transform: uppercase;}
  .smallcaps {font-variant: small-caps;}



  .illustration {
    text-align: center !important;
    img {margin-left:auto !important; margin-right:auto !important;  padding-bottom: .75em; display: block; width: 80%;
        max-width: 400pt; max-height: 600pt; }
    .med img  {width: 60%;}
    .small img {width: 40%;}
    .full img {width: 96%;}
  }
  .centerquote {margin-left: auto !important; margin-right: auto !important; width: 20em;}

  .list {
    padding-left: 3em !important; white-space: pre-line; line-height: 1.5em !important;
    .blockquote {padding-left: 6em !important;}
  }

  .nomargin-bottom {margin-bottom: 0 !important;}
  .nomargin-top {margin-top: 0 !important;}
  .nomargin {margin-bottom: 0 !important;margin-top: 0 !important;}


  table.basic {
    font-family: @secondary_header_font;;
   // border: 1px solid silver;
    border-collapse: collapse;
    tbody tr:nth-child(odd) {
      background-color: lighten(desaturate(DarkOliveGreen, 20%), 60%);
    }
    tr {
      //vertical-align: top;
    }
    th {
      font-size: 16pt;
      padding: 6px 14px 4px 14px;
      border-bottom: 1px solid silver;
      font-weight: bold;
    }
    td {
      //border-bottom: 1px solid gray;
      font-size: 14pt;
      padding: 6px 14px 4px 14px;
    }
    & .center, &.center {
      margin-left:auto;  margin-right:auto;
    }
  }




  // title page and front matter
  section.titlepage {
    font-family: @main_header_font;
    margin:0; margin-bottom: 14em;
    text-align: center;
    div,h1,h2,h3 {text-align: center; width: 100%; padding: 0; margin:0; margin-bottom:.5em; line-height: 1em; font-weight: normal;}

    .cover {
      width: 80%; max-width: 10em !important;
      opacity: 0.8;
      z-index: -100;
    }
    .title {
      font-size: 2em;
      text-shadow: 3px 3px 2px rgba(150, 150, 150, 0.37);
      font-weight: normal;
    }
    .subtitle {
      font-family: @secondary_header_font;
      font-size: 1.5em;
      font-variant:small-caps;
      page-break-after: avoid;
    }
    .author {
      font-family: @main_header_font;
      font-size: 1.5em;
      //font-style: italic;
      margin-bottom: 2em;
      color: @secondary_color;
    }
    .logo {
      width: 15%; max-height:12em; opacity: 0.9;
      margin-top:8em; margin-bottom: 1em;
    }
    .logo-label {
      margin-top:0;
      font-weight: normal;
    }
  } // section.titlepage

  // Table of Contents Section
  section.contents {
    margin-left: 20pt;
    //font-size: @main_font_size * 1.5;
    //line-height: 2em;
    font-family: @secondary_header_font;
    font-variant: small-caps;
    ul {list-style-type: none;}
    li.toc_first {
      font-size: 18pt; line-height: 1.5em;
      margin-left: 0pt; padding-top:.5em;
    }
    li.toc_second {
      font-size: 14pt; line-height: 1.5em;
      margin-left: 30pt;
      text-indent: -10pt
    }
    li.toc_third {
      font-size: 12pt; line-height: 1.25em;
      margin-left: 50pt;
      text-indent: -10pt
    }
    li.toc_fourth {
      font-size: 12pt; line-height: 1.25em;
      margin-left: 70pt;
      text-indent: -10pt
    }
    .date {
      font-style: italic;
      font-variant: normal;
      font-size: 12pt;
      color: @grayed_color;
    }
    .ref {
      font-size: 10pt;
      color: @grayed_color;
    }
  } // section.contents

  section.copyright {
    font-size: @main_font_size * .5;
    margin: 5em; margin-left: auto; margin-right: auto;
    padding: 3em; padding-bottom: 1em;
    /*border: 1px solid gray;*/
    box-shadow: 1px 1px 8px #bbb;
    background-color: #EFEEEE;
    border-radius: 10px;
    color: @grayed_color;
    .section_header {
      margin-top:0;
    }
    width: 60%;
    overflow-x: hidden;


  } // section.copyright

  // Content Sections Blocks (will not be in a section.content inside app)
  p, div.par {
    margin:1em; margin-left: 60px; margin-right: 40px;
    text-align: justify; text-justify: distribute;
    position: relative;
    font-style: normal;

    // number paragraph blocks unless .noid class
    &[id]:not(.noid):before {
      font-family: GentiumPlus, 'Georgia', 'serif';
      content: attr(id);
      font-size: 12px;
      vertical-align:top;
      position: absolute;
      top: 0; left: -65px; padding-left:15px;
      font-style: normal;
      color: @grayed_color;
    }
    // override if block has data-displayid
    &[data-displayid]:not(.noid):before {
      content: attr(data-displayid);
    }
    /* &[data-displayid][dir="rtl"]:not(.noid):before { display: none; }*/
    // override position for rtl
    &[id][dir="rtl"]:not(.noid):before,  &[data-displayid][dir="rtl"]:not(.noid):before {
      right:-55px; left: 0; padding-right:15px; padding-left:0; direction: rtl;
    }



    &[id]:not(.noid).bm:before {
      //background-color: @main_text_color;
      background-image: url(bm.png); background-size: 1em;
      background-repeat: no-repeat;
      background-position: 0 4px;
      //
      //text-shadow: 0 0 0.1em @main_text_color, 0 0 1.5em @main_text_color, 0 0 1.5em @main_text_color;
    }

    // sub-block blocks for sub-paragraph formatting
    /*
    .block, .preamble, .salutation, .sig, .date, .continued, .blockquote, .nocontent, &.nocontent,
     .prayer, &.prayer, .reference, &.reference,
     .preamble, .signature, .sitalcent, .editor-note, .verse, &.preamble, &.blockquote, &.verse,
     .question, &.question, .answer, &.answer {
      display: block; margin-top: 1em; margin-bottom: 1em;
    } */

    // to make a span act like a block, add one of these classes:
    &.blockquote, .blockquote, &.block, .block, &.verse, .verse {display: block; margin-top: 1em; margin-bottom: 1em;}

    .preamble, &.preamble, .prayer, &.prayer, .italic, &.italic {font-style:italic;}
    .blockquote, &.blockquote {padding-left:2em; }
    .sitalcent, &.sitalcent {font-style: italic; padding-left: 3em;}
    .editor-note, &.editor-note, .question, &.question {font-style: italic; color: @grayed_color;}
    .verse, &.verse  {white-space: pre-line;}
    .signature, &.signature, .reference, &.reference {text-align:right;}
    .reference, &.reference {margin-top: -.25em !important; margin-bottom: 2em;}
    .ref, .reference, &.reference { color: @grayed_color !important; font-size: 75% !important;}

    // footnote links
    a[data-fnid]:before {
      content: '[' attr(data-fnid) ']'; font-size: 50%; line-height:50%; color: @grayed_color;
      position: relative; top: -1em;
      text-decoration: none !important;
    }
    [dir='rtl'] a[data-fnid]:before {content: ']' attr(data-fnid) '['; }
    a[data-fnid]:hover {cursor:pointer;}


    // highlight audio playing position
    .audio_highlight, .hl  {
      text-shadow:
        0 0 0.1em @main_background_color, 0 0 1.5em @audio_highlight, 0 0 1.5em @audio_highlight,
        0 0 1.5em @audio_highlight, 0 0 1.5em @audio_highlight;
    }
    .audio_highlight2,.hl2 {text-shadow: 0 0 1.5em @audio_highlight, 0 0 1.5em @audio_highlight;}

    // set color and fix quotes
    &, q, &q, aside q, h3 q, h2 q, && {
      padding:.15em;
      &.baha, &.bab, &.abd, &.sacred, &.bible, &.muhammad, &.quran, &.jesus,
      &.ali, &.tradition, &.husayn, &.muh {font-style: italic;}
      &:before, &:after {content:'';}  // remove displayed quotes since they do not copy/paste
       //     color: @main_text_color; // oops, this overrides all our theme text colors
       &.baha {color: @author1_color;}
       &.bab {color: @author2_color;}
       &.abd {color: @author3_color;}

    }

    // page numbers floating on right
    span[data-pg]:before {
      content: 'pg ' attr(data-pg); color: @grayed_color;
      padding: 0; padding-left:3px; padding-right:3px;
      float: right; margin-right: -4em;
      font-size:8pt;
      font-style: normal;
      position: absolute; right: 0;
    }

    // lists
    ul {list-style-type: none; margin-left:2em;}
    ul li {text-indent: -1em; margin-bottom: 3pt;}

    // Right to left Languages require <q> to be inside the quotation marks for some odd reason
    /*
    [dir='rtl'] {
      display: block;
      text-align: justify; text-justify: kashida;
      // can we do this? We need to adjust this in a relative manner, this will not work:
      font-size: 120%; line-height: 108%;
      padding-top:.5em; padding-bottom: 1em;
      q {padding:0; font-style:inherit;}
    }*/

    &.translation {display: table; border-spacing: 20px 0; direction: rtl; width: auto !important; min-width: 90%;
      box-sizing: border-box;
      //margin-bottom:2em;
    }
    div.english, div.alt_lang {display: table-cell; width: 48% !important;}
    .alt_lang.ar, .alt_lang.fa {
      text-align: justify; text-justify: kashida;
      font-size: 18pt !important; line-height: 1.75em !important;
      q {padding:0; font-style:inherit;}
    }
  } // content blocks: p, div.par





  // Any other section types (data-type attribute)
  // letter, chapter, selection,
  //
  //


  // Dropcaps
  .dropcap:first-letter,
  &:not(.nodropcap) .section_header + p[id]:not(.nodropcap):first-letter,
  &:not(.nodropcap) .subhead + p[id]:not(.nodropcap):first-letter
  {
    float: left; padding-left: 0; font-style: normal; text-indent: 0; color: @secondary_color;
    font-family: Romantik;
    margin-right: 5px;
  }
  .dropcap.acorn:first-letter  {font-family: Acorn;}






  // blockquote adjustment, should match sub-block with style .blockquote
  blockquote { // these must always be within a div.par, not <p>
    padding-left: 3em; padding-right:1em;
    &:before, &:after {content:'';} // no fake quotation marks
  }

  // footnote blocks, currently using aside.fn
  .fn[id] {
    margin: 1em; margin-left: 150px;
    text-align: justify; text-justify: distribute;
    position: relative;
    font-size: 95% !important;
    display: none;
    color: @grayed_color;
    &:before {
      display: block;
      margin-right: 1em;
      font-style: italic; font-size: 70% !important;
      content: '[' attr(id) ']';
      vertical-align:top;
      position: absolute;
      top: 0; left: -70px;
      font-style: normal;
    }
    p {
      margin-left:0; margin-right: 1em; margin-top: 0; margin-bottom: 1em;
      text-align: justify; text-justify: distribute;
      font-size: 95% !important;
      color: @grayed_color;
    }
  }

  // section header and sub-headers
  .subhead, .section, .section_header, .header {
    margin-top:0; margin-bottom:0; padding:0; margin-top: 2em; //margin-left: 46pt;
    color: @secondary_color; text-align:center;
    /*font-size: 22pt;*/ font-weight: normal; font-family: @secondary_header_font;
    page-break-after: avoid !important;
  }
  // one section header at the beginning of each section. Override CSS if no page break needed
  .section, .section_header {
    font-size: 22pt;
    margin: 0; margin-bottom: 1em; display: block;
    margin-top:3em;
    //font-family: @main_header_font;
    // some subclasses for creating section headers
    .date, .sectionnum  { // large italic
      font-size: 1.4em;
      font-style:normal;
      font-weight:normal;
      margin-top:0; margin-bottom: .2em;
      font-family: @secondary_header_font;
      font-variant:small-caps;
    }
    .desc, .venue, .title{ // very large
      font-variant:small-caps;
      font-size: 1.2em;
      //font-style:italic;
      font-weight:normal;
      margin-top:0; margin-bottom: 0;
      font-family: @secondary_header_font;
      &.smaller {font-size: .7em;}
      &.larger {font-size: 1.5em;}
    }
    .notes {
      font-size: .6em;
      font-style:normal;
      margin:2em;
      font-variant:small-caps;
      font-weight:normal;
      font-family: @secondary_header_font;
    }
    & + div.par {page-break-before: avoid;} // avoid breaking right after subheader
  } // .section, .section_header
  section.content.chapter, .section {page-break-before: always !important;}


  // theme overrides - default is white but can also be "sepia" or "night"
  &:not(.theme_sepia):not(.theme_night)  {
    background-color: @main_background_color;
    color: @main_text_color;
  }

  // theme overrides - default is white but can also be "sepia" or "night"
  &.theme_sepia {
    background-color: @sepia_background_color !important;
    color: @sepia_text_color !important;
  }

  &.theme_night {
    background-color: @night_background_color;
    color: @night_text_color !important;
    a, a:visited {color: @night_link_color !important}

    section.titlepage .author, .subhead, .section, .section_header, .dropcap:first-letter,
      .section_header + p[id]:not(.nodropcap):first-letter, .subhead + p[id]:not(.nodropcap):first-letter
      {color: @night_secondary_color !important;}

    p[id]:before, div.par[id]:before, span[data-pg]:before, section.contents .date, aside.fn[id],
     aside.fn[id]:before, .editor-note, a[data-fnid]:before, .question,
     .reference, &.reference, .ref, &.ref     {color: @night_grayed_color !important;}

    q { color: @night_secondary_color;
      &.baha {color: @night_author1_color;}
      &.bab {color: @night_author2_color;}
      &.abd {color: @night_author3_color;}
    }
    .audio_highlight  {text-shadow:
      0 0 0.1em @night_background_color, 0 0 1.5em @night_audio_highlight, 0 0 1.5em @night_audio_highlight,
      0 0 1.5em @night_audio_highlight, 0 0 1.5em @night_audio_highlight !important;
    }
    .audio_highlight2 {text-shadow: 0 0 1.5em @night_audio_highlight, 0 0 1.5em @night_audio_highlight !important;}
  }




  // font overrides
  &:not(.font_cabin):not(.font_cabin):not(.font_sanchez):not(.font_dyslexic):not(.font_bembo):not(.font_typewriter),
   &.font_gentium  {p, aside,div.par {font-family: GentiumPlus, 'Georgia', 'serif';   font-size: @gentium_fontsize;}}
  &.font_cabin    {p, aside,div.par {font-family: Cabin, 'arial', 'sans-serif';       font-size: @cabin_fontsize;}}
  &.font_sanchez  {p, aside,div.par {font-family: Sanchez, 'arial', 'sans-serif';     font-size: @sanchez_fontsize;}}
  &.font_bembo    {p, aside,div.par {font-family: Bembo, 'Georgia', 'serif';          font-size: @bembo_fontsize;}}
  &.font_dyslexic {p, aside,div.par {font-family: Dyslexic, 'arial', 'sans-serif';    font-size: @dyslexic_fontsize;}}
  &.font_typewriter {p,aside,div.par {font-family: Typewriter, 'Courier', 'mono';    font-size: @typed_fontsize;
    letter-spacing: .5px; }}

  // line heights: a multiplier based on font, and also we need to adjust the dropcap
  &:not(.line-height_2):not(.line-height_3) { // .line-height_1 is default
    // line height changes affect each font differently
    &:not(.font_cabin):not(.font_cabin):not(.font_sanchez):not(.font_dyslexic):not(.font_bembo):not(.font_typewriter),
     &.font_gentium  {p,aside,div.par {line-height: @gentium_lineheight; }}
    &.font_cabin    {p,aside,div.par {line-height: @cabin_lineheight;   }}
    &.font_sanchez  {p,aside,div.par {line-height: @sanchez_lineheight; }}
    &.font_bembo    {p,aside,div.par {line-height: @bembo_lineheight;   }}
    &.font_dyslexic {p,aside,div.par {line-height: @dyslexic_lineheight;}}
    &.font_typewriter {p,aside,div.par {line-height: @typed_lineheight;}}
    // dropcap size and position need to be adjusted also
    //section.titlepage .author, .subhead, .section, .section_header,
    .dropcap:first-letter,
      &:not(.nodropcap) .section_header + p[id]:not(.nodropcap):first-letter,
      &:not(.nodropcap) .subhead + p[id]:not(.nodropcap):first-letter {font-size: 49pt; margin-top:17pt;}
    // woodcut: {font-size: 39pt; margin-top:12pt;}
    .dropcap.acorn:first-letter  {font-size: 50pt; margin-top:12pt;}
  }
  &.line-height_2 {
    // line height changes affect each font differently
    &:not(.font_cabin):not(.font_cabin):not(.font_sanchez):not(.font_dyslexic):not(.font_bembo):not(.font_typewriter),
     &.font_gentium  {p,aside,div.par {line-height: @gentium_lineheight * 1.15; }}
    &.font_cabin    {p,aside,div.par {line-height: @cabin_lineheight * 1.15;   }}
    &.font_sanchez  {p,aside,div.par {line-height: @sanchez_lineheight * 1.15; }}
    &.font_bembo    {p,aside,div.par {line-height: @bembo_lineheight * 1.15;   }}
    &.font_dyslexic {p,aside,div.par {line-height: @dyslexic_lineheight * 1.15;}}
    &.font_typewriter {p,aside,div.par {line-height: @typed_lineheight * 1.15;}}
    // dropcap size and position need to be adjusted also
    //section.titlepage .author, .subhead, .section, .section_header,
    .dropcap:first-letter,
      &:not(.nodropcap) .section_header + p[id]:not(.nodropcap):first-letter,
      &:not(.nodropcap) .subhead + p[id]:not(.nodropcap):first-letter {font-size: 54pt; margin-top:14pt;}
    // woodcut: {font-size: 44pt; margin-top:13pt;}
    .dropcap.acorn:first-letter  {font-size: 52pt; margin-top:14pt;}
  }
  &.line-height_3 {
    // line height changes affect each font differently
    &:not(.font_cabin):not(.font_cabin):not(.font_sanchez):not(.font_dyslexic):not(.font_bembo):not(.font_typewriter),
     &.font_gentium  {p,aside,div.par {line-height: @gentium_lineheight * 1.3; }}
    &.font_cabin    {p,aside,div.par {line-height: @cabin_lineheight * 1.3;   }}
    &.font_sanchez  {p,aside,div.par {line-height: @sanchez_lineheight * 1.3; }}
    &.font_bembo    {p,aside,div.par {line-height: @bembo_lineheight * 1.3;   }}
    &.font_dyslexic {p,aside,div.par {line-height: @dyslexic_lineheight * 1.3;}}
    &.font_typewriter {p,aside,div.par {line-height: @typed_lineheight * 1.3;}}
    // dropcap size and position need to be adjusted also
    //section.titlepage .author, .subhead, .section, .section_header,
    .dropcap:first-letter,
      &:not(.nodropcap) .section_header + p[id]:not(.nodropcap):first-letter,
      &:not(.nodropcap) .subhead + p[id]:not(.nodropcap):first-letter {font-size: 63pt; margin-top:13pt;}
    // woodcut: {font-size: 50pt; margin-top:15pt;}
    .dropcap.acorn:first-letter  {font-size: 59pt; margin-top:15pt;}
  }


  // override bits especially for printing & layout
  .printonly {display: none;}
  .screenonly {display: block;}
  .no-pad-above {padding-top:0 !important; margin-top:0 !important;}
  .no-pad-below {padding-bottom:0 !important;  margin-bottom:0 !important;}
  .no-pad {padding-bottom:0 !important; padding-top:0 !important;  margin-top:0 !important; margin-bottom:0 !important;}
  .pad-above {padding-top:4em !important;}
  .pad-below {padding-bottom:4em !important;}
  .margin-above {margin-top:3em !important;}
  .margin-below {margin-bottom:3em !important;}
  .right {text-align:right !important;}
  .center {text-align: center !important;}
  .reference {text-align:right;}
  .rtl {text-align:right !important;}
  .larger {font-size: 120% !important;}
  .smaller {font-size: 80% !important;}

  .editor_note, &.editor_note, [data-author='editor'] {color: #525252; font-size: (@main_font_size * .9) !important;}




  @media only print {
    //font-size: 10pt !important;
    zoom: 80%;

    background-color: white !important; color:black !important;
    .showid:before {color: black !important;}
    aside.fn[id] {display: block !important; @secondary_color: DarkOliveGreen !important;}
    q {
       color: @secondary_color !important;
       &.baha {color: @author1_color !important;}
       &.bab {color: @author2_color !important;}
       &.abd {color: @author3_color !important;}
    }
    #control_panel {display: none !important;}
    .printonly {display: block !important;}
    .screenonly {display: none !important;}
    .pagebreak-before {display:block; page-break-after: always !important;}
    .pagebreak-after {display:block; page-break-after: always !important;}

    .section {padding-top: 4em !important; margin-left: 1em !important; margin-right: 1em !important;}
    .section.chapter {padding-top: 10em !important;}

    section.contents {
      margin-left: 0pt;
      li.toc_first {font-size: 12pt !important; margin-left: 0;}
      li.toc_second {font-size: 10pt !important; margin-left: 20pt;}
      .date {font-size: 8pt !important;}
    } // section.contents
  }


} // body.ocean

